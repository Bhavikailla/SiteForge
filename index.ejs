<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drag and Drop Builder</title>
    <meta name="csrf-token" content="<%= csrfToken %>">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        body {
        background-image: url('https://static.vecteezy.com/system/resources/previews/013/545/856/original/abstract-line-wave-linear-gradient-background-modern-colorful-wavy-line-abstract-background-vector.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Navbar -->
<nav class="bg-white p-4 shadow-md transition-all duration-500 ease-in-out bg-opacity-60 backdrop-blur-md">
    <div class="max-w-screen-xl px-16 mx-auto flex justify-between items-center">
      <!-- Logo with Hover Animation -->
      <h1 class="text-blue-900 text-2xl italic font-semibold transform transition-transform duration-300 hover:scale-110 hover:text-blue-700"><a href="/dashboard">SiteForge</a></h1>
      <!-- Navbar Links Aligned to the Right -->
      <div class="ml-auto flex space-x-4">
        <a href="/profile" class="text-blue-900 text-sm bg-gray-300 px-4 py-2 rounded transition-all duration-300 ease-in-out hover:bg-blue-500 hover:text-white transform hover:scale-110">Profile</a>
        <a href="/" class="text-blue-900 text-sm bg-gray-300 px-4 py-2 rounded transition-all duration-300 ease-in-out hover:bg-blue-500 hover:text-white transform hover:scale-110">Build Page</a>
        <a href="/ai/page" class="text-blue-900 text-sm bg-gray-300 px-4 py-2 rounded transition-all duration-300 ease-in-out hover:bg-blue-500 hover:text-white transform hover:scale-110">Generate Page</a>
        <% if (user && user.role !== 'user') { %>  
          <a href="/admin" class="text-blue-900 text-sm bg-gray-300 px-4 py-2 rounded transition-all duration-300 ease-in-out hover:bg-blue-500 hover:text-white transform hover:scale-110">Admin</a>
          <a href="/contacts" class="text-blue-900 text-sm bg-gray-300 px-4 py-2 rounded transition-all duration-300 ease-in-out hover:bg-blue-500 hover:text-white transform hover:scale-110">Queries</a>
        <% } %>
        <a href="/contact" class="text-blue-900 text-sm bg-gray-300 px-4 py-2 rounded transition-all duration-300 ease-in-out hover:bg-blue-500 hover:text-white transform hover:scale-110">Contact Us</a>
        <a href="/logout" class="text-blue-900 text-sm bg-gray-300 px-4 py-2 rounded transition-all duration-300 ease-in-out hover:bg-blue-500 hover:text-white transform hover:scale-110">Logout</a>
      </div>
    </div>
  </nav>
    <div class="flex mt-20 gap-10 px-10">
        <!-- Sidebar Elements -->
        <div class="bg-white p-5 rounded-xl shadow-lg w-1/4">
            <h3 class="text-blue-900 text-3xl italic font-semibold mb-4 flex flex-col items-center justify-center ">Elements</h3>
            <div class="grid grid-cols-2 gap-4">
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded cursor-grab" data-type="h1">Heading</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded cursor-grab" data-type="p">Paragraph</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded cursor-grab" data-type="button">Button</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded cursor-grab" data-type="image">Image</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="div">Div</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="section">Section</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="ul">Unordered List</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="ol">Ordered List</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="input">Input Field</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab border" data-type="select">Drop Down</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="textarea">Text Area</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="video">Video</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="marquee">Marquee</div>
                <div draggable="true" class="element p-3 bg-blue-500 text-white rounded-lg cursor-grab" data-type="grid">Grid</div>
            </div>
        </div>
        <!-- Builder Area -->
        <div class="w-3/4 flex flex-col items-center">
            <div id="builderArea" class="bg-gray-200 p-8 rounded-2xl shadow-lg min-h-[500px] flex flex-col items-center justify-center border-dashed border-2 border-gray-400 w-full">
                <h3 class="text-2xl font-semibold text-gray-400">Drag and drop elements here</h3>
            </div>
             <!-- Style Editor Panel -->
    <div class="fixed top-5 right-5 bg-white p-4 shadow-md rounded-lg hidden" id="stylePanel">
        <!-- Drag Button -->
        <button id="drag" class="cursor-move px-2 focus:outline-none focus:ring-2 focus:ring-gray-400 rounded-lg p-1 block mx-auto">
            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.5 15.75C6.5 14.3693 5.38071 13.25 4 13.25C2.61929 13.25 1.5 14.3693 1.5 15.75C1.5 17.1307 2.61929 18.25 4 18.25C5.38071 18.25 6.5 17.1307 6.5 15.75Z" fill="#c5bfbf"></path>
                <path d="M6.5 8.25C6.5 6.86929 5.38071 5.75 4 5.75C2.61929 5.75 1.5 6.86929 1.5 8.25C1.5 9.63071 2.61929 10.75 4 10.75C5.38071 10.75 6.5 9.63071 6.5 8.25Z" fill="#c5bfbf"></path>
                <path d="M12 13.25C13.3807 13.25 14.5 14.3693 14.5 15.75C14.5 17.1307 13.3807 18.25 12 18.25C10.6193 18.25 9.5 17.1307 9.5 15.75C9.5 14.3693 10.6193 13.25 12 13.25Z" fill="#c5bfbf"></path>
            </svg>
        </button>
        <h3 class="text-lg font-semibold mb-3">Style Editor</h3>
        <label class="block mb-2">Text Color: <input type="color" id="colorPicker" class="ml-2"></label>
        <label class="block mb-2">Background Color: <input type="color" id="bgColorPicker" class="ml-2"></label>
        <label class="block mb-2">Font Size: <input type="number" id="fontSize" class="border p-1 w-full"></label>
        <label class="block mb-2">Font Weight:
            <select id="fontWeight" class="border p-1 w-full">
                <option value="normal">Normal</option>
                <option value="bold">Bold</option>
            </select>
        </label>
        <label class="block mb-2">Text Align:
            <select id="textAlign" class="border p-1 w-full">
                <option value="left">Left</option>
                <option value="center">Center</option>
                <option value="right">Right</option>
            </select>
        </label>
        <label class="block mb-2">Padding: <input type="number" id="padding" class="border p-1 w-full"></label>
        <label class="block mb-2">Margin: <input type="number" id="margin" class="border p-1 w-full"></label>
        <label class="block mb-2">Flex Direction:
            <select id="flexDirection" class="border p-1 w-full">
                <option value="row">Row</option>
                <option value="column">Column</option>
            </select>
        </label>
        <label class="block mb-2">Justify Content:
            <select id="justifyContent" class="border p-1 w-full">
                <option value="flex-start">Start</option>
                <option value="center">Center</option>
                <option value="flex-end">End</option>
                <option value="space-between">Space Between</option>
                <option value="space-around">Space Around</option>
            </select>
        </label>
    </div>
            <!-- Save Button -->
            <button id="saveBtn" class="mt-6 bg-teal-600 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-teal-700 w-full border">Save Page</button>
        </div>
    </div>
    <!-- Footer -->
<footer class="bg-gray-300 text-gray-900 py-4 shadow-md w-full mt-44">
    <div class="container mx-auto flex flex-col items-center justify-center px-6 text-center">
        <div class="text-lg font-semibold">&copy; 2025 SiteForge. All Rights Reserved.</div>
    </div>
</footer>
    <script src="/js/script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const builderArea = document.getElementById("builderArea");
            const elements = document.querySelectorAll(".element");
            // Allow Drop
            builderArea.addEventListener("dragover", (e) => {
                e.preventDefault();
            });
            // Drop Element
            builderArea.addEventListener("drop", (e) => {
                e.preventDefault();
                const type = e.dataTransfer.getData("text/plain");
                if (type) {
                    // Remove placeholder text if first element is dropped
                    const placeholder = builderArea.querySelector("h3");
                    if (placeholder) {
                        placeholder.remove();
                    }
                    // Enable removing elements on double-click
                    newElement.addEventListener("dblclick", function () {
                        newElement.remove();
                        checkEmptyBuilderArea();
                    });
                    builderArea.appendChild(newElement);
                }
            });
            // Handle Drag Start
            elements.forEach(element => {
                element.addEventListener("dragstart", (e) => {
                    e.dataTransfer.setData("text/plain", element.getAttribute("data-type"));
                });
            });
            // Check and Restore Placeholder if Empty
            function checkEmptyBuilderArea() {
                if (builderArea.children.length === 0) {
                    const placeholderText = document.createElement("h3");
                    placeholderText.classList.add("text-2xl", "font-semibold", "text-gray-400");
                    placeholderText.textContent = "Drag and drop elements here";
                    builderArea.appendChild(placeholderText);
                }
            }
        });
    </script>
</body>
</html>
